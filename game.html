<!DOCTYPE html>
<html>
<head>
  <title>Number Calculation</title>
  <script>
    function calculate() {
      var number = document.getElementById("number").value;
      var digits = Array.from(number.toString()).map(Number);
      var operators = ["+", "-", "*", "/"];
      var results = [];

      function permute(permutation) {
        var length = permutation.length,
          result = [permutation.slice()],
          c = new Array(length).fill(0),
          i = 1,
          k, p;

        while (i < length) {
          if (c[i] < i) {
            k = i % 2 && c[i];
            p = permutation[i];
            permutation[i] = permutation[k];
            permutation[k] = p;
            ++c[i];
            i = 1;
            result.push(permutation.slice());
          } else {
            c[i] = 0;
            ++i;
          }
        }
        return result;
      }

      function evaluateExpression(expression) {
        try {
          return eval(expression);
        } catch (error) {
          return null;
        }
      }

      function generateCombinations(digits, operators) {
        var combinations = [];
        var count = 0;

        function generateExpressions(expression, remainingDigits, remainingOperators) {
          if (remainingDigits.length === 0) {
            var result = evaluateExpression(expression);
            if (result === 10) {
              combinations.push(expression + " = " + result);
            }
            return;
          }

          for (var i = 0; i < remainingDigits.length; i++) {
            for (var j = 0; j < remainingOperators.length; j++) {
              var currentDigit = remainingDigits[i];
              var currentOperator = remainingOperators[j];

              var updatedExpression = expression + currentDigit + currentOperator;

              var updatedDigits = remainingDigits.slice();
              updatedDigits.splice(i, 1);

              generateExpressions(updatedExpression, updatedDigits, remainingOperators);
            }
          }
        }

        generateExpressions("", digits, operators);
        return combinations;
      }

      var combinations = generateCombinations(digits, operators);

      if (combinations.length === 0) {
        document.getElementById("result").textContent = "組み合わせが見つかりませんでした。";
      } else {
        var resultHTML = "<ul>";
        for (var i = 0; i < combinations.length; i++) {
          resultHTML += "<li>" + combinations[i] + "</li>";
          if (i === 3) {
            break;
          }
        }
        if (combinations.length > 4) {
          resultHTML += "<li>まだまだたくさんの組み合わせがあります。</li>";
        }
        resultHTML += "</ul>";
        document.getElementById("result").innerHTML = resultHTML;
      }
    }
  </script>
</head>
<body>
  <h1>Number Calculation〜</h1>
  <input type="text" id="number" placeholder="自然数を入力してください">
  <button onclick="calculate()">計算</button>
  <div id="result"></div>
</body>
</html>
