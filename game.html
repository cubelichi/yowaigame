<!DOCTYPE html>
<html>
<head>
  <title>Number Calculation</title>
  <script>
    function calculate() {
      var number = document.getElementById("number").value;
      var digits = Array.from(number.toString()).map(Number);
      var operators = ["+", "-", "*", "/"];
      var results = [];

      function permute(permutation) {
        var length = permutation.length,
          result = [permutation.slice()],
          c = new Array(length).fill(0),
          i = 1,
          k, p;

        while (i < length) {
          if (c[i] < i) {
            k = i % 2 && c[i];
            p = permutation[i];
            permutation[i] = permutation[k];
            permutation[k] = p;
            ++c[i];
            i = 1;
            result.push(permutation.slice());
          } else {
            c[i] = 0;
            ++i;
          }
        }
        return result;
      }

      function evaluateExpression(expression) {
        try {
          return eval(expression);
        } catch (error) {
          return null;
        }
      }

      function generateCombinations(digits, operators) {
        var combinations = [];
        var count = 0;
        var maxResults = 3; // 表示する結果の最大数

        function generateExpressions(currentExpression, remainingDigits) {
          if (remainingDigits.length === 0) {
            var result = evaluateExpression(currentExpression);
            if (result === 10) {
              combinations.push(currentExpression + " = " + result);
              count++;
              if (count >= maxResults) {
                throw new Error("maxResultsReached");
              }
            }
            return;
          }

          for (var i = 0; i < remainingDigits.length; i++) {
            var currentDigit = remainingDigits[i];
            var remainingDigitsWithoutCurrent = remainingDigits.slice();
            remainingDigitsWithoutCurrent.splice(i, 1);

            if (operators.length > 0) {
              for (var j = 0; j < operators.length; j++) {
                var operator = operators[j];
                var currentExpressionWithOperator = currentExpression + operator + currentDigit;
                generateExpressions(currentExpressionWithOperator, remainingDigitsWithoutCurrent);
              }
            } else {
              generateExpressions(currentExpression + currentDigit, remainingDigitsWithoutCurrent);
            }
          }
        }

        try {
          generateExpressions("", digits);
        } catch (error) {
          if (error.message === "maxResultsReached") {
            // Ignore the error
          } else {
            throw error;
          }
        }

        return combinations;
      }

      var combinations = generateCombinations(digits, operators);

      if (combinations.length === 0) {
        document.getElementById("result").textContent = "組み合わせが見つかりませんでした。";
      } else {
        var resultHTML = "<ul>";
        for (var i = 0; i < Math.min(combinations.length, 4); i++) {
          resultHTML += "<li>" + combinations[i] + "</li>";
        }
        if (combinations.length > 4) {
          resultHTML += "<li>まだまだたくさんの結果があります...</li>";
        }
        resultHTML += "</ul>";
        document.getElementById("result").innerHTML = resultHTML;
      }
    }
  </script>
</head>
<body>
  <h1>Number Calculation!</h1>
  <input type="text" id="number" placeholder="自然数を入力してください">
  <button onclick="calculate()">計算</button>
  <div id="result"></div>
</body>
</html>
